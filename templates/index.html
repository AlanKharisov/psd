<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>PSDinfo</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>

<body>

<!-- TOP HEADER -->
<header class="site-header">
    <div class="header-row">
        <a class="brand" href="/">
            <div class="brand-logo">PSD</div>
        </a>

        <form class="search" method="GET" action="/">
            <input name="q" value="{{.Query}}" placeholder="–ü–æ—à—É–∫ —Ç–æ–≤–∞—Ä—ñ–≤..." />
            <button type="submit" aria-label="–ü–æ—à—É–∫">üîé</button>
        </form>

        <nav class="header-actions">
            {{if .IsLoggedIn}}
            <a class="icon-link" href="/logout">–í–∏–π—Ç–∏</a>
            <a class="icon-link" href="/admin">–ê–¥–º—ñ–Ω–∫–∞</a>
            {{else}}
            <a class="icon-link" href="/login">–ê–≤—Ç–æ—Ä–∏–∑—É–≤–∞—Ç–∏—Å—è</a>
            {{end}}

            <a class="cart-pill" href="/cart">
                <span class="cart-ico">üõí</span>
                <span class="cart-text">–ö–æ—à–∏–∫</span>
                <span class="cart-sum">({{printf "%.2f" .CartTotal}})</span>
            </a>
        </nav>
    </div>

    <!-- NAV CATEGORIES (—Ç–≤–æ—è –ª–æ–≥—ñ–∫–∞: –∫–æ–ª–µ–∫—Ü—ñ—ó = –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó/–∫–æ–ª–µ–∫—Ü—ñ—ó) -->
    <div class="nav-row">
        <a class="nav-link" href="/">–ì–æ–ª–æ–≤–Ω–∞</a>
        <a class="nav-link" href="/?q=Work%20%26%20Travel">Work &amp; Travel</a>
        <a class="nav-link" href="/?q=–°–ø–æ—Ä—è–¥–∂–µ–Ω–Ω—è">–°–ø–æ—Ä—è–¥–∂–µ–Ω–Ω—è</a>
        <a class="nav-link" href="/?q=–ó–±—Ä–æ–π–æ–≤—ñ%20–∞–∫—Å–µ—Å—É–∞—Ä–∏">–ó–±—Ä–æ–π–æ–≤—ñ –∞–∫—Å–µ—Å—É–∞—Ä–∏</a>
        <a class="nav-link" href="/?q=–ù–æ–≤–∏–Ω–∫–∏">–ù–æ–≤–∏–Ω–∫–∏</a>
    </div>
</header>

<!-- HERO -->
<section class="hero">
    <div class="hero-bg"></div>
    <div class="hero-card">
        <div class="hero-title">PSDinfo</div>
        <div class="hero-subtitle">–£–Ω—ñ–∫–∞–ª—å–Ω–∏–π –≤–µ—Ç–µ—Ä–∞–Ω—Å—å–∫–∏–π –º–µ—Ä—á —Ç–∞ —è–∫—ñ—Å–Ω–µ –≤—ñ–π—Å—å–∫–æ–≤–µ —Å–ø–æ—Ä—è–¥–∂–µ–Ω–Ω—è</div>
    </div>
</section>

<main class="container">

    <!-- COLLECTIONS -->
    {{if .Collections}}
    <section class="section">
        <div class="section-head">
            <h2>–ö–æ–ª–µ–∫—Ü—ñ—ó</h2>
            <div class="section-hint">–ó–±—Ä–æ–π–æ–≤—ñ –∞–∫—Å–µ—Å—É–∞—Ä–∏ / —Ç–µ–º–∞—Ç–∏—á–Ω—ñ –Ω–∞–±–æ—Ä–∏</div>
        </div>

        <div class="grid">
            {{range .Collections}}
            <article class="card reveal">
                <a class="card-img" href="/product?id={{.ID}}">
                    <img src="{{.Photo}}" alt="{{.Name}}">
                </a>

                <div class="card-body">
                    <div class="card-brand">{{.Brand}}</div>
                    <a class="card-title" href="/product?id={{.ID}}">{{.Name}}</a>

                    <div class="card-price">
                        <span class="price-main">–≤—ñ–¥ ‚Ç¥{{printf "%.2f" .Price}}</span>
                    </div>

                    <div class="card-meta">
                        {{if inStock .}}
                        <span class="stock ok">‚óè –í –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ</span>
                        {{else}}
                        <span class="stock no">‚óè –ù–µ–º–∞—î</span>
                        {{end}}

                        {{if .Color}}
                        <span class="colors">
                <span class="dot" title="–ö–æ–ª—ñ—Ä: {{.Color}}"></span>
                <span class="muted">{{.Color}}</span>
              </span>
                        {{end}}
                    </div>

                    <!-- BUY BUTTON (–∑–Ω–∏–∑—É, –Ω–µ +) -->
                    <form class="buy" method="POST" action="/cart/add">
                        <input type="hidden" name="id" value="{{.ID}}">
                        <input type="hidden" name="redirect_to" value="/">
                        <button class="btn-buy" type="submit">–ö—É–ø–∏—Ç–∏</button>
                    </form>
                </div>
            </article>
            {{end}}
        </div>
    </section>
    {{end}}

    <!-- NEW -->
    {{if .NewItems}}
    <section class="section">
        <div class="section-head">
            <h2>–ù–æ–≤–∏–Ω–∫–∏</h2>
            <div class="section-hint">–û–Ω–æ–≤–ª–µ–Ω–Ω—è –æ—Å—Ç–∞–Ω–Ω—ñ—Ö 3 –º—ñ—Å—è—Ü—ñ–≤</div>
        </div>

        <div class="grid">
            {{range .NewItems}}
            <article class="card reveal">
                <a class="card-img" href="/product?id={{.ID}}">
                    <img src="{{.Photo}}" alt="{{.Name}}">
                    <span class="badge-new">NEW</span>
                </a>

                <div class="card-body">
                    <div class="card-brand">{{.Brand}}</div>
                    <a class="card-title" href="/product?id={{.ID}}">{{.Name}}</a>

                    <div class="card-price">
                        <span class="price-main">–≤—ñ–¥ ‚Ç¥{{printf "%.2f" .Price}}</span>
                    </div>

                    <div class="card-meta">
                        {{if inStock .}}
                        <span class="stock ok">‚óè –í –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ</span>
                        {{else}}
                        <span class="stock no">‚óè –ù–µ–º–∞—î</span>
                        {{end}}

                        {{if .Color}}
                        <span class="colors">
                <span class="dot" title="–ö–æ–ª—ñ—Ä: {{.Color}}"></span>
                <span class="muted">{{.Color}}</span>
              </span>
                        {{end}}
                    </div>

                    <form class="buy" method="POST" action="/cart/add">
                        <input type="hidden" name="id" value="{{.ID}}">
                        <input type="hidden" name="redirect_to" value="/">
                        <button class="btn-buy" type="submit">–ö—É–ø–∏—Ç–∏</button>
                    </form>
                </div>
            </article>
            {{end}}
        </div>
    </section>
    {{end}}

    <!-- ALL -->
    <section class="section">
        <div class="section-head">
            <h2>–¢–æ–≤–∞—Ä–∏</h2>
            <div class="section-hint">–£—Å—ñ –¥–æ—Å—Ç—É–ø–Ω—ñ –ø–æ–∑–∏—Ü—ñ—ó</div>
        </div>

        {{if not .All}}
        <div class="empty">–ù—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ. –°–ø—Ä–æ–±—É–π —ñ–Ω—à–∏–π –∑–∞–ø–∏—Ç.</div>
        {{end}}

        <div class="grid">
            {{range .All}}
            <article class="card reveal">
                <a class="card-img" href="/product?id={{.ID}}">
                    <img src="{{.Photo}}" alt="{{.Name}}">
                </a>

                <div class="card-body">
                    <div class="card-brand">{{.Brand}}</div>
                    <a class="card-title" href="/product?id={{.ID}}">{{.Name}}</a>

                    <div class="card-price">
                        <span class="price-main">–≤—ñ–¥ ‚Ç¥{{printf "%.2f" .Price}}</span>
                    </div>

                    <div class="card-meta">
                        {{if inStock .}}
                        <span class="stock ok">‚óè –í –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ</span>
                        {{else}}
                        <span class="stock no">‚óè –ù–µ–º–∞—î</span>
                        {{end}}

                        {{if .Color}}
                        <span class="colors">
                <span class="dot" title="–ö–æ–ª—ñ—Ä: {{.Color}}"></span>
                <span class="muted">{{.Color}}</span>
              </span>
                        {{end}}
                    </div>

                    <form class="buy" method="POST" action="/cart/add">
                        <input type="hidden" name="id" value="{{.ID}}">
                        <input type="hidden" name="redirect_to" value="/">
                        <button class="btn-buy" type="submit">–ö—É–ø–∏—Ç–∏</button>
                    </form>
                </div>
            </article>
            {{end}}
        </div>
    </section>

</main>

<script>
    // –µ—Ñ–µ–∫—Ç –ø–æ—è–≤–∏ —Ç–æ–≤–∞—Ä—ñ–≤ –ø—Ä–∏ —Å–∫—Ä–æ–ª—ñ
    const els = document.querySelectorAll('.reveal');
    const io = new IntersectionObserver((entries) => {
        entries.forEach(e => {
            if (e.isIntersecting) e.target.classList.add('show');
        });
    }, { threshold: 0.15 });

    els.forEach(el => io.observe(el));
</script>

</body>
</html>
